import{v as L,aE as S,aF as B,aq as M,aG as y,aH as q,i as T,a as z,a3 as A,x as d,e as H,aI as O,Q as W}from"./BwRTE3Yh.js";const P=new Set,Q=new Set;function D(t,e,n,a={}){function s(r){if(a.capture||F.call(e,r),!r.cancelBubble)return B(()=>n?.call(this,r))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?S(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function j(t,e,n,a,s){var r={capture:a,passive:s},l=D(t,e,n,r);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&L(()=>{e.removeEventListener(t,l,r)})}let E=null;function F(t){var e=this,n=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],r=s[0]||t.target;E=t;var l=0,u=E===t&&t.__root;if(u){var c=s.indexOf(u);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var i=s.indexOf(e);if(i===-1)return;c<=i&&(l=c)}if(r=s[l]||t.target,r!==e){M(t,"currentTarget",{configurable:!0,get(){return r||n}});var p=z,h=A;y(null),q(null);try{for(var b,g=[];r!==null;){var o=r.assignedSlot||r.parentNode||r.host||null;try{var f=r["__"+a];if(f!=null&&(!r.disabled||t.target===r))if(T(f)){var[w,...x]=f;w.apply(r,[t,...x])}else f.call(r,t)}catch(v){b?g.push(v):b=v}if(t.cancelBubble||o===e||o===null)break;r=o}if(b){for(let v of g)queueMicrotask(()=>{throw v});throw b}}finally{t.__root=e,delete t.currentTarget,y(p),q(h)}}}function k(t,e,n){if(t==null)return e(void 0),n&&n(void 0),d;const a=H(()=>t.subscribe(e,n));return a.unsubscribe?()=>a.unsubscribe():a}const _=[];function G(t,e){return{subscribe:I(t,e).subscribe}}function I(t,e=d){let n=null;const a=new Set;function s(u){if(O(t,u)&&(t=u,n)){const c=!_.length;for(const i of a)i[1](),_.push(i,t);if(c){for(let i=0;i<_.length;i+=2)_[i][0](_[i+1]);_.length=0}}}function r(u){s(u(t))}function l(u,c=d){const i=[u,c];return a.add(i),a.size===1&&(n=e(s,r)||d),u(t),()=>{a.delete(i),a.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:l}}function m(t,e,n){const a=!Array.isArray(t),s=a?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return G(n,(l,u)=>{let c=!1;const i=[];let p=0,h=d;const b=()=>{if(p)return;h();const o=e(a?i[0]:i,l,u);r?l(o):h=typeof o=="function"?o:d},g=s.map((o,f)=>k(o,w=>{i[f]=w,p&=~(1<<f),c&&b()},()=>{p|=1<<f}));return c=!0,b(),function(){W(g),h(),c=!1}})}function C(t){let e;return k(t,n=>e=n)(),e}export{P as a,m as d,j as e,C as g,F as h,Q as r,k as s,I as w};
