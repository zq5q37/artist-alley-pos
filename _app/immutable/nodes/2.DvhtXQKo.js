import"../chunks/DsnmJJEf.js";import"../chunks/6sSYQDXh.js";import{o as R,p as Qe,aN as Aa,aT as Sa,aI as Ia,n as Ue,B as we,w as ie,al as Ve,an as Xe,z as V,am as wa,ap as ze,I as ke,A as Ca,S,au as Je,ai as Ea,aj as Ta,ak as Be,G as xe,C as Fa,Y as Ma,aU as Le,ac as Na,aV as Oe,a0 as We,i as Da,aW as le,ao as je,aX as ve,aY as Ba,aZ as ye,y as ea,F as La,a_ as Oa,$ as qa,a$ as Ra,a3 as Ha,b0 as aa,aE as Pa,b1 as Ga,a2 as ta,a5 as F,aa as m,a6 as g,af as f,a8 as O,e as Q,T as U,a9 as T,a4 as sa,a7 as J,ad as Se,ah as qe}from"../chunks/BwRTE3Yh.js";import{s as C}from"../chunks/DD_gKpv0.js";import{p as Re,s as He,a as Pe,g as Ge,t as Ye,f as Ya,b as Za}from"../chunks/CygcRl_L.js";import{p as Ka,s as W,a as ra,b as Ze,i as re,c as Qa}from"../chunks/CX7V-eIi.js";import{s as ne,r as Ua}from"../chunks/CMlN-UJd.js";import{d as ia,w as Va,e as Y}from"../chunks/DOIaMueM.js";import{i as na}from"../chunks/zW7ffoYw.js";function Xa(r,a,e){R&&Qe();var i=r,n=wa,s,t,l=null,c=Aa()?Sa:Ia;function _(){s&&ze(s),l!==null&&(l.lastChild.remove(),i.before(l),l=null),s=t}Ue(()=>{if(c(n,n=a())){var p=i,$=Xe();$&&(l=document.createDocumentFragment(),l.append(p=we())),t=ie(()=>e(p)),$?Ve.add_callback(_):_()}}),R&&(i=V)}function j(r,a){return a}function za(r,a,e){for(var i=r.items,n=[],s=a.length,t=0;t<s;t++)Oa(a[t].e,n,!0);var l=s>0&&n.length===0&&e!==null;if(l){var c=e.parentNode;qa(c),c.append(e),i.clear(),L(r,a[0].prev,a[s-1].next)}Ra(n,()=>{for(var _=0;_<s;_++){var p=a[_];l||(i.delete(p.k),L(r,p.prev,p.next)),ea(p.e,!l)}})}function ee(r,a,e,i,n,s=null){var t=r,l={flags:a,items:new Map,first:null},c=(a&aa)!==0;if(c){var _=r;t=R?ke(Ca(_)):_.appendChild(we())}R&&Qe();var p=null,$=!1,I=new Map,x=Je(()=>{var h=e();return Da(h)?h:h==null?[]:We(h)}),v,o;function u(){Ja(o,v,l,I,t,n,a,i,e),s!==null&&(v.length===0?p?je(p):p=ie(()=>s(t)):p!==null&&ze(p,()=>{p=null}))}Ue(()=>{o??=Ha,v=S(x);var h=v.length;if($&&h===0)return;$=h===0;let k=!1;if(R){var E=Ea(t)===Ta;E!==(h===0)&&(t=Be(),ke(t),xe(!1),k=!0)}if(R){for(var N=null,A,d=0;d<h;d++){if(V.nodeType===Fa&&V.data===Ma){t=V,k=!0,xe(!1);break}var b=v[d],w=i(b,d);A=Ie(V,l,N,null,b,w,d,n,a,e),l.items.set(w,A),N=A}h>0&&ke(Be())}if(R)h===0&&s&&(p=ie(()=>s(t)));else if(Xe()){var H=new Set,Z=Ve;for(d=0;d<h;d+=1){b=v[d],w=i(b,d);var D=l.items.get(w)??I.get(w);D?(a&(ve|le))!==0&&la(D,b,d,a):(A=Ie(null,l,null,null,b,w,d,n,a,e,!0),I.set(w,A)),H.add(w)}for(const[M,P]of l.items)H.has(M)||Z.skipped_effects.add(P.e);Z.add_callback(u)}else u();k&&xe(!0),S(x)}),R&&(t=V)}function Ja(r,a,e,i,n,s,t,l,c){var _=(t&Ga)!==0,p=(t&(ve|le))!==0,$=a.length,I=e.items,x=e.first,v=x,o,u=null,h,k=[],E=[],N,A,d,b;if(_)for(b=0;b<$;b+=1)N=a[b],A=l(N,b),d=I.get(A),d!==void 0&&(d.a?.measure(),(h??=new Set).add(d));for(b=0;b<$;b+=1){if(N=a[b],A=l(N,b),d=I.get(A),d===void 0){var w=i.get(A);if(w!==void 0){i.delete(A),I.set(A,w);var H=u?u.next:v;L(e,u,w),L(e,w,H),Ae(w,H,n),u=w}else{var Z=v?v.e.nodes_start:n;u=Ie(Z,e,u,u===null?e.first:u.next,N,A,b,s,t,c)}I.set(A,u),k=[],E=[],v=u.next;continue}if(p&&la(d,N,b,t),(d.e.f&ye)!==0&&(je(d.e),_&&(d.a?.unfix(),(h??=new Set).delete(d))),d!==v){if(o!==void 0&&o.has(d)){if(k.length<E.length){var D=E[0],M;u=D.prev;var P=k[0],q=k[k.length-1];for(M=0;M<k.length;M+=1)Ae(k[M],D,n);for(M=0;M<E.length;M+=1)o.delete(E[M]);L(e,P.prev,q.next),L(e,u,P),L(e,q,D),v=D,u=q,b-=1,k=[],E=[]}else o.delete(d),Ae(d,v,n),L(e,d.prev,d.next),L(e,d,u===null?e.first:u.next),L(e,u,d),u=d;continue}for(k=[],E=[];v!==null&&v.k!==A;)(v.e.f&ye)===0&&(o??=new Set).add(v),E.push(v),v=v.next;if(v===null)continue;d=v}k.push(d),u=d,v=d.next}if(v!==null||o!==void 0){for(var y=o===void 0?[]:We(o);v!==null;)(v.e.f&ye)===0&&y.push(v),v=v.next;var B=y.length;if(B>0){var ae=(t&aa)!==0&&$===0?n:null;if(_){for(b=0;b<B;b+=1)y[b].a?.measure();for(b=0;b<B;b+=1)y[b].a?.fix()}za(e,y,ae)}}_&&Pa(()=>{if(h!==void 0)for(d of h)d.a?.apply()}),r.first=e.first&&e.first.e,r.last=u&&u.e;for(var oe of i.values())ea(oe.e);i.clear()}function la(r,a,e,i){(i&ve)!==0&&Le(r.v,a),(i&le)!==0?Le(r.i,e):r.i=e}function Ie(r,a,e,i,n,s,t,l,c,_,p){var $=(c&ve)!==0,I=(c&Ba)===0,x=$?I?Na(n,!1,!1):Oe(n):n,v=(c&le)===0?t:Oe(t),o={i:v,v:x,k:s,a:null,e:null,prev:e,next:i};try{if(r===null){var u=document.createDocumentFragment();u.append(r=we())}return o.e=ie(()=>l(r,x,v,_),R),o.e.prev=e&&e.e,o.e.next=i&&i.e,e===null?p||(a.first=o):(e.next=o,e.e.next=o.e),i!==null&&(i.prev=o,i.e.prev=o.e),o}finally{}}function Ae(r,a,e){for(var i=r.next?r.next.e.nodes_start:e,n=a?a.e.nodes_start:e,s=r.e.nodes_start;s!==null&&s!==i;){var t=La(s);n.before(s),s=t}}function L(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}const Wa=["A3","A4","A5","Mini","Sticker"];function ja(r,a){const e=Math.floor(r/3),i=e*a,n=r*a-i,s=e>0?[`Buy-2-Get-1: −$${i.toFixed(2)}`]:[];return{discount:i,charged:n,notes:s}}function Ke(r,a,e,i){const n=Math.floor(r/2),s=r%2,t=r*a,l=n*e+s*a,c=t-l,_=c>0?[`${i} pair pricing: −$${c.toFixed(2)}`]:[];return{discount:c,charged:l,notes:_}}function et(r){const{product:a,qty:e}=r,i=a.price;let n=0,s=e*i,t=[];if(Wa.includes(a.type)){const c=ja(e,i);n+=c.discount,s=c.charged,t.push(...c.notes)}else if(a.type==="Keychain"){const c=Ke(e,8,15,"Keychain");n+=c.discount,s=c.charged,t.push(...c.notes)}else if(a.type==="Stand"){const c=Ke(e,20,36,"Stand");n+=c.discount,s=c.charged,t.push(...c.notes)}return{subtotal:e*i,discount:n,charged:s,notes:t}}function at(r){const a=new Map;let e=0,i=0,n=0,s=0;for(const t of r){const l=et(t);a.set(t.product.id,l),e+=t.qty,i+=l.subtotal,n+=l.discount,s+=l.charged}return{perLine:a,totals:{items:e,subtotal:i,discount:n,total:s}}}function tt(){const r="pos-cart-v1",a=JSON.parse(localStorage.getItem(r)||"{}"),{subscribe:e,update:i,set:n}=Va(a);function s(t){localStorage.setItem(r,JSON.stringify(t))}return{subscribe:e,add(t,l=1){i(c=>{const p=(c[t.id]?.qty??0)+l,$={...c,[t.id]:{product:t,qty:p}};return s($),$})},setQty(t,l){i(c=>{const _={...c};return l<=0?delete _[t.id]:_[t.id]={product:t,qty:l},s(_),_})},remove(t){i(l=>{const c={...l};return delete c[t],s(c),c})},clear(){n({}),localStorage.removeItem(r)}}}const X=tt(),va=ia(X,r=>Object.values(r)),st=ia(va,r=>at(r));var rt=F('<div class="card svelte-6fsh72"><img class="thumb svelte-6fsh72" loading="lazy"/> <div class="meta svelte-6fsh72"><div class="name svelte-6fsh72"> </div> <div class="tags svelte-6fsh72"><span class="tag type svelte-6fsh72"> </span> <span class="tag game svelte-6fsh72"> </span></div> <div class="price svelte-6fsh72"> </div></div> <div class="qty svelte-6fsh72"><button class="btn minus svelte-6fsh72" aria-label="decrease">−</button> <button class="btn plus svelte-6fsh72" aria-label="increase">＋</button></div></div>');function it(r,a){ta(a,!1);let e=Ka(a,"product",8);const i=()=>X.add(e(),1),n=()=>X.add(e(),-1);na();var s=rt(),t=m(s),l=g(t,2),c=m(l),_=m(c,!0);f(c);var p=g(c,2),$=m(p),I=m($,!0);f($);var x=g($,2),v=m(x,!0);f(x),f(p);var o=g(p,2),u=m(o);f(o),f(l);var h=g(l,2),k=m(h),E=g(k,2);f(h),f(s),O(()=>{ne(t,"src",(U(e()),Q(()=>e().img??"/images/placeholder.png"))),ne(t,"alt",(U(e()),Q(()=>e().name))),C(_,(U(e()),Q(()=>e().name))),C(I,(U(e()),Q(()=>e().type))),C(v,(U(e()),Q(()=>e().game))),C(u,`$${U(e()),Q(()=>e().price)??""}`)}),Y("click",k,Re(He(n))),Y("click",E,Re(He(i))),T(r,s),sa()}var nt=F("<option> </option>"),lt=F("<option> </option>"),vt=F('<div class="toolbar svelte-um6emw"><select aria-label="Filter by type" class="svelte-um6emw"></select> <select aria-label="Filter by game" class="svelte-um6emw"></select></div> <div class="grid svelte-um6emw"></div>',1);function ot(r){const[a,e]=ra(),i=()=>W(Ye,"$typeFilter",a),n=()=>W(Ge,"$gameFilter",a),s=()=>W(Ya,"$filteredCatalog",a),t=["All","A3","A4","A5","Mini","Sticker","Keychain","Stand"],l=["All","Blue Archive","Zenless Zone Zero","Genshin Impact","Honkai: Star Rail","Misc"];var c=vt(),_=J(c),p=m(_);O(()=>{i(),Se(()=>{})}),ee(p,5,()=>t,j,(x,v)=>{var o=nt(),u=m(o,!0);f(o);var h={};O(()=>{C(u,S(v)),h!==(h=S(v))&&(o.value=(o.__value=S(v))??"")}),T(x,o)}),f(p);var $=g(p,2);O(()=>{n(),Se(()=>{})}),ee($,5,()=>l,j,(x,v)=>{var o=lt(),u=m(o,!0);f(o);var h={};O(()=>{C(u,S(v)),h!==(h=S(v))&&(o.value=(o.__value=S(v))??"")}),T(x,o)}),f($),f(_);var I=g(_,2);ee(I,5,s,j,(x,v)=>{it(x,{get product(){return S(v)}})}),f(I),Pe(p,i,x=>Ze(Ye,x)),Pe($,n,x=>Ze(Ge,x)),T(r,c),e()}var ct=F('<div class="empty svelte-ckca8h">No items yet. Tap a product to add.</div>'),dt=F('<div class="note svelte-ckca8h"> </div>'),ut=F('<div class="discount svelte-ckca8h"> </div> <!>',1),ft=F('<div class="money svelte-ckca8h"><div> </div> <!> <div class="charged svelte-ckca8h"> </div></div>'),_t=F('<li class="line svelte-ckca8h"><img class="thumb svelte-ckca8h"/> <div class="info svelte-ckca8h"><div class="top svelte-ckca8h"><div class="name svelte-ckca8h"> </div> <div class="tags svelte-ckca8h"> </div></div> <div class="qty-controls svelte-ckca8h"><button aria-label="−" class="svelte-ckca8h">−</button> <input type="number" min="0" inputmode="numeric" class="svelte-ckca8h"/> <button aria-label="+" class="svelte-ckca8h">+</button> <button class="remove svelte-ckca8h" aria-label="Remove">X</button></div> <!></div></li>'),pt=F('<ul class="lines svelte-ckca8h"></ul> <div class="summary svelte-ckca8h"><div> </div> <div> </div> <div class="disc svelte-ckca8h"> </div> <div class="total svelte-ckca8h"> </div></div> <button class="btn checkout svelte-ckca8h"> </button>',1),mt=F('<div class="cart svelte-ckca8h"><div class="cart-header svelte-ckca8h"><h2>Cart</h2> <button class="btn subtle" aria-label="Clear cart">Clear</button></div> <!></div>');function ht(r,a){ta(a,!1);const[e,i]=ra(),n=()=>W(va,"$cartArray",e),s=()=>W(st,"$totalsAndBreakdown",e),t=(o,u)=>{const h=n().find(k=>k.product.id===o);h&&X.setQty(h.product,u)},l=o=>X.remove(o),c=()=>X.clear();na();var _=mt(),p=m(_),$=g(m(p),2);f(p);var I=g(p,2);{var x=o=>{var u=ct();T(o,u)},v=o=>{var u=pt(),h=J(u);ee(h,5,n,j,(P,q)=>{let y=()=>S(q).product,B=()=>S(q).qty;var ae=qe(),oe=J(ae);Xa(oe,()=>y().id,oa=>{var ce=_t(),de=m(ce),Ce=g(de,2),ue=m(Ce),fe=m(ue),ca=m(fe,!0);f(fe);var Ee=g(fe,2),da=m(Ee);f(Ee),f(ue);var _e=g(ue,2),Te=m(_e),te=g(Te,2);Ua(te);var Fe=g(te,2),ua=g(Fe,2);f(_e);var fa=g(_e,2);{var _a=G=>{const K=Je(()=>s().perLine.get(y().id));var Me=qe(),pa=J(Me);{var ma=pe=>{var me=ft(),he=m(me),ha=m(he);f(he);var Ne=g(he,2);{var ba=z=>{var se=ut(),be=J(se),$a=m(be);f(be);var ka=g(be,2);ee(ka,1,()=>S(K).notes,j,(ge,xa)=>{var $e=dt(),ya=m($e,!0);f($e),O(()=>C(ya,S(xa))),T(ge,$e)}),O(ge=>C($a,`−$${ge??""}`),[()=>S(K).discount.toFixed(2)]),T(z,se)};re(Ne,z=>{S(K).discount>0&&z(ba)})}var De=g(Ne,2),ga=m(De);f(De),f(me),O((z,se)=>{C(ha,`$${y().price??""} × ${B()??""} = $${z??""}`),C(ga,`Line total: $${se??""}`)},[()=>S(K).subtotal.toFixed(2),()=>S(K).charged.toFixed(2)]),T(pe,me)};re(pa,pe=>{S(K)&&pe(ma)})}T(G,Me)};re(fa,G=>{s().perLine.has(y().id)&&G(_a)})}f(Ce),f(ce),O(()=>{ne(de,"src",y().img??"/images/placeholder.png"),ne(de,"alt",y().name),C(ca,y().name),C(da,`${y().type??""} • ${y().game??""}`)}),Y("click",Te,()=>t(y().id,B()-1)),Za(te,B,G=>(S(q).qty=G,Se(()=>n()),Qa(e,"$cartArray"))),Y("change",te,G=>t(y().id,parseInt(G.target.value||"0"))),Y("click",Fe,()=>t(y().id,B()+1)),Y("click",ua,()=>l(y().id)),T(oa,ce)}),T(P,ae)}),f(h);var k=g(h,2),E=m(k),N=m(E);f(E);var A=g(E,2),d=m(A);f(A);var b=g(A,2),w=m(b);f(b);var H=g(b,2),Z=m(H);f(H),f(k);var D=g(k,2),M=m(D);f(D),O((P,q,y,B)=>{C(N,`Items: ${s().totals.items??""}`),C(d,`Subtotal: $${P??""}`),C(w,`Discount: −$${q??""}`),C(Z,`Total: $${y??""}`),C(M,`Charge $${B??""}`)},[()=>s().totals.subtotal.toFixed(2),()=>s().totals.discount.toFixed(2),()=>s().totals.total.toFixed(2),()=>s().totals.total.toFixed(2)]),T(o,u)};re(I,o=>{n().length===0?o(x):o(v,!1)})}f(_),Y("click",$,c),T(r,_),sa(),i()}var bt=F('<div class="card svelte-1ifc2ir"><h3>Current Discounts</h3> <ul class="svelte-1ifc2ir"><li>Prints (A3/A4/A5/Mini) & Stickers: <b>Buy-2-Get-1 free</b></li> <li>Keychains: <b>$15 per pair</b> ($8 single)</li> <li>Stands: <b>$36 per pair</b> ($20 single)</li></ul></div>');function gt(r){var a=bt();T(r,a)}var $t=F('<div class="wrap svelte-1piv206"><header class="appbar svelte-1piv206"><h1 class="svelte-1piv206">Artist Alley POS</h1></header> <main class="content svelte-1piv206"><section class="catalog svelte-1piv206"><!></section> <aside class="cart svelte-1piv206"><!> <!></aside></main></div>');function Tt(r){var a=$t(),e=g(m(a),2),i=m(e),n=m(i);ot(n),f(i);var s=g(i,2),t=m(s);ht(t,{});var l=g(t,2);gt(l),f(s),f(e),f(a),T(r,a)}export{Tt as component};
